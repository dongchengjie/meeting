# 应用相关

## 应用首页

接口描述：**

- 跳转至首页

**请求URL：**

- ` /` 或 ` /index` 或 ` /index.html`

**请求方式：**

- GET

**参数：**

- 无

## 获取用户个人信息

**接口描述：**

- 获取用户个人信息

**请求URL：**

- ` /profile`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例1:**

 ```
 {
  "id": 1,
  "role": 1,
  "userid": "1705050205",
  "avatar": "http://xxxxxx/xxx.png",
  "name": "董成杰",
  "age": 0,
  "gender": 1,
  "phone": "123456789",
  "email": "",
  "errcode": 0,
  "errmsg": "ok"
}
 ```

| 参数    | 类型   | 描述                                  |
| :------ | :----- | :------------------------------------ |
| id      | int    | 用户信息记录数id                      |
| role    | int    | 身份（1代表学生，2代表老师）          |
| userid  | String | 学号或职工号                          |
| avatar  | String | 头像url                               |
| name    | String | 姓名                                  |
| age     | int    | 年龄                                  |
| gender  | int    | 性别（0代表未设置，1代表男，2代表女） |
| phone   | String | 电话                                  |
| email   | String | 邮箱                                  |
| errcode | int    | 错误码                                |
| errmsg  | String | 错误信息                              |

 **返回示例2:**

```
{
  "errcode": 3001,
  "errmsg": "请在企业微信客户端打开链接"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 上传用户头像

**接口描述：**

- 上传用户头像，返回图像url

**请求URL：**

- ` /profile/upload`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型                | 说明     |
| :----- | :--- | :------------------ | -------- |
| upload | 是   | multipart/form-data | 图像文件 |

**传参示例：**

- 无


 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "http://xxx/xxx.png"
}
```

 **返回示例2:**

```
 {
  "errcode": 4001,
  "errmsg": "您上传头像的不是图片类型"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 修改用户个人信息

**接口描述：**

- 修改用户个人信息

**请求URL：**

- ` /profile`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型   | 说明                                  |
| :----- | :--- | :----- | ------------------------------------- |
| gender | 否   | int    | 性别（0代表未设置，1代表男，2代表女） |
| age    | 否   | int    | 年龄                                  |
| phone  | 否   | String | 电话                                  |
| email  | 否   | String | 邮箱                                  |

**传参示例：**

```
gender : 1
age : 21
avatar : http://xxx/xxx.png
phone : 12345678900
email : xxxx@xx.com
```

 **返回示例1:**

```
 {
  "id": 1,
  "role": 1,
  "userid": "1705050205",
  "avatar": "http://xxxxxx/xxx.png",
  "name": "董成杰",
  "age": 21,
  "gender": 1,
  "phone": "12345678900",
  "email": "xxxx@xx.com",
  "errcode": 0,
  "errmsg": "ok"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述                                  |
| :------ | :----- | :------------------------------------ |
| id      | int    | 用户信息记录数id                      |
| role    | int    | 身份（1代表学生，2代表老师）          |
| userid  | String | 学号或职工号                          |
| avatar  | String | 头像url                               |
| name    | String | 姓名                                  |
| age     | int    | 年龄                                  |
| gender  | int    | 性别（0代表未设置，1代表男，2代表女） |
| phone   | String | 电话                                  |
| email   | String | 邮箱                                  |
| errcode | int    | 错误码                                |
| errmsg  | String | 错误信息                              |

 **返回示例2:**

```
 {
  "errcode": 2002,
  "errmsg": "修改用户信息失败"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 获取开放会议室列表

**接口描述：**

- 修改用户个人信息

**请求URL：**

- ` /rooms`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例:**

```
 {
  "errcode": 0,
  "errmsg": "ok",
  "rooms": [
    {
      "roomId": 1,
      "place": "逸夫楼101",
      "size": 50,
      "available": 1
    },
    {
      "roomId": 2,
      "place": "逸夫楼201",
      "size": 40,
      "available": 1
    }
  ]
}
```

 **返回参数说明:**

| 参数      | 类型   | 描述                             |
| :-------- | :----- | :------------------------------- |
| errcode   | int    | 错误码                           |
| errmsg    | String | 错误信息                         |
| roomId    | int    | 会议室id                         |
| place     | String | 会议室地点                       |
| size      | int    | 可容纳人数                       |
| available | int    | 是否对外开放（0代表否，1代表是） |

## 筛选会议室

**接口描述：**

- 根据删选条件，筛选出合适的会议室

**请求URL：**

- ` /rooms`

**请求方式：**

- POST

**参数：**

| 参数名   | 必选 | 类型   | 说明                        |
| :------- | :--- | :----- | --------------------------- |
| roomId   | 是   | int    | 会议室id（0代表所有会议室） |
| date     | 是   | long   | 占用开始时间戳              |
| duration | 是   | int    | 占用时长                    |
| size     | 否   | String | 参与人数                    |

**传参示例：**

```
roomId : 0
date : 1590139500000
time : 1589612400000
duration : 60
size : 30
```

 **返回示例:**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "rooms": [
    {
      "roomId": 2,
      "place": "逸夫楼201",
      "size": 40,
      "available": 1
    },
    {
      "roomId": 3,
      "place": "逸夫楼301",
      "size": 35,
      "available": 1
    }
  ]
}
```

 **返回参数说明:**

| 参数      | 类型   | 描述                             |
| :-------- | :----- | :------------------------------- |
| errcode   | int    | 错误码                           |
| errmsg    | String | 错误信息                         |
| roomId    | int    | 会议室id                         |
| place     | String | 会议室地点                       |
| size      | int    | 可容纳人数                       |
| available | int    | 是否对外开放（0代表否，1代表是） |

 **备注:**

 - 错误码详情请参照全局错误码

## 会议室详情页面

**接口描述：**

- 跳转的至预约信息填写页面

**请求URL：**

- ` /room/{roomId}/{date}`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明           |
| :----- | :--- | :--- | -------------- |
| roomId | 是   | int  | 会议室id       |
| date   | 是   | long | 占用开始时间戳 |

**传参示例：**

```
roomId : 1
date : 1590139500000
```

## 返回会议室占用情况

**接口描述：**

- 返回会议室占用情况（指定日期的预约或所有预约）

**请求URL：**

- ` /rooms`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型   | 说明                                        |
| :----- | :--- | :----- | ------------------------------------------- |
| roomId | 是   | int    | 会议室id                                    |
| type   | 是   | String | "that"或"all"，分别代表当日预约和所有预约   |
| date   | 是   | long   | 占用开始时间戳，当type为"all"时，参数非必须 |

**传参示例：**

```
roomId : 1
type : all
date : 1
```

 **返回示例:**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "roomId": 1,
  "periods": [
    {
      "startTime": "2020-05-22 18:20",
      "duration": 60
    },
    {
      "startTime": "2020-05-29 16:00",
      "duration": 45
    }
  ]
}
```

 **返回参数说明:**

| 参数      | 类型   | 描述         |
| :-------- | :----- | :----------- |
| errcode   | int    | 错误码       |
| errmsg    | String | 错误信息     |
| roomId    | int    | 会议室id     |
| startTime | String | 占用开始时间 |
| duration  | int    | 占用时长     |

 **备注:**

 - 错误码详情请参照全局错误码

## 预约信息填写页面

**接口描述：**

- 跳转至预约信息填写页面

**请求URL：**

- ` /appointment/{roomId}`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明     |
| :----- | :--- | :--- | -------- |
| roomId | 是   | int  | 会议室id |

**传参示例：**

```
roomId : 1
datetime : 1590744900000
duration : 60
size : 30
phone : 187974039611
purpose : "开会"
note : ""
```

 **返回示例1:**

```
{
  "errcode": 0,
  "errmsg": "ok",
}
```

 **返回示例2:**

```
{
  "errcode": 3003,
  "errmsg": "预约的时间段为会议室非开放时间段",
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 提交预约请求

**接口描述：**

- 提交预约请求

**请求URL：**

- ` /appointment`

**请求方式：**

- POST

**参数：**

| 参数名   | 必选 | 类型   | 说明           |
| :------- | :--- | :----- | -------------- |
| roomId   | 是   | int    | 会议室id       |
| datetime | 是   | long   | 占用开始时间戳 |
| duration | 是   | int    | 占用时长       |
| size     | 是   | String | 参与人数       |
| phone    | 是   | String | 联系电话       |
| purpose  | 是   | String | 会议室用途     |
| note     | 否   | String | 备注信息       |

**传参示例：**

```
roomId : 1
datetime : 1590744900000
duration : 60
size : 30
phone : 1234567891
purpose : "开会"
note : ""
```

 **返回示例1:**

```
{
  "errcode": 0,
  "errmsg": "ok",
}
```

 **返回示例2:**

```
{
  "errcode": 3003,
  "errmsg": "预约的时间段为会议室非开放时间段",
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 返回指定状态码预约记录

**接口描述：**

- 返回指定状态码预约记录

**请求URL：**

- ` /history/{statusCode}`

**请求方式：**

- POST

**参数：**

| 参数名     | 必选 | 类型 | 说明       |
| :--------- | :--- | :--- | ---------- |
| statusCode | 是   | int  | 审核状态码 |

**参数取值：**

| 参数取值 | 参数含义   |
| :------- | :--------- |
| 0        | 预约过期   |
| 1        | 预约被取消 |
| 2        | 审核中     |
| 3        | 审核通过   |
| 4        | 审核退回   |

 **返回示例:**

 ```
 {
  "statusCode": 2,
  "history": [
    {
      "appointId": 3,
      "userid": "1705050205",
      "place": "逸夫楼101",
      "purpose": "开会",
      "participants": 30,
      "name": "张三",
      "phone": "123456789",
      "note": "",
      "startTime": "May 22, 2020, 6:20:00 PM",
      "duration": 60,
      "statusCode": 2,
      "statusInfo": "审核中",
      "checkInfo": "审核中，请耐心等待",
      "handTime": "May 16, 2020, 5:05:42 PM"
    }
  ],
  "errcode": 0,
  "errmsg": "ok"
}
 ```

 **返回参数说明:**

| 参数         | 类型   | 描述         |
| :----------- | :----- | :----------- |
| statusCode   | int    | 审核状态码   |
| errcode      | int    | 错误码       |
| errmsg       | String | 错误信息     |
| appointId    | int    | 预约记录id   |
| userid       | String | 学号或职工号 |
| place        | String | 会议室地点   |
| purpose      | String | 会议室用途   |
| participants | int    | 参与人数     |
| name         | String | 姓名         |
| phone        | String | 联系电话     |
| note         | String | 备注信息     |
| startTime    | String | 占用开始时间 |
| duration     | int    | 占用时长     |
| statusCode   | int    | 审核状态码   |
| statusInfo   | String | 审核描述     |
| checkInfo    | String | 审核信息     |
| handTime     | String | 预约提交时间 |

## 跳转至预约记录详细信息

**接口描述：**

- 跳转至预约记录详细信息

**请求URL：**

- ` /history/detail/{appointId}`

**请求方式：**

- GET

**参数：**

| 参数名    | 必选 | 类型 | 说明       |
| :-------- | :--- | :--- | ---------- |
| appointId | 是   | int  | 预约记录id |

## 取消会议室预约

**接口描述：**

- 取消会议室预约，并返回预约详情页面

**请求URL：**

- ` /appointment/cancel/{appointId}`

**请求方式：**

- GET

**参数：**

| 参数名    | 必选 | 类型 | 说明       |
| :-------- | :--- | :--- | ---------- |
| appointId | 是   | int  | 预约记录id |

**传参示例：**

```
appointId : 5
```

# 后台相关

## 后台管理页面

**接口描述：**

- 跳转至后台管理界面

**请求URL：**

- ` /admin`

**请求方式：**

- GET

**参数：**

- 无

## 管理员登录验证

**接口描述：**

- 管理员登录身份验证

**请求URL：**

- ` /login`

**请求方式：**

- POST

**参数：**

| 参数名   | 必选 | 类型   | 说明       |
| :------- | :--- | :----- | ---------- |
| username | 是   | String | 管理员账号 |
| password | 是   | String | 管理员密码 |

**传参示例：**

```
username: admin
password: admin
```

 **返回示例1:**

```
  {
  "errcode": 0,
  "errmsg": "登录成功"
}
```

 **返回示例2:**

```
  {
  "errcode": 1002,
  "errmsg": "管理员用户名或密码错误"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 扫码登录页面

**接口描述：**

- 跳转至扫码登录后台管理系统

**请求URL：**

- ` /admin/qrcode`

**请求方式：**

- GET

**参数：**

- 无

## 扫码登录验证

**接口描述：**

- 扫码登录验证，登录成功则跳转到后台，否则跳转到错误界面（仅供企业微信重定向调用）

**请求URL：**

- ` /admin/qrcode/login`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明                                               |
| :----- | :--- | :--- | -------------------------------------------------- |
| code   | 是   | int  | 企业微信重定向参数code，后台通过code来获取用户身份 |
| state  | 是   | int  | 后台设置的字符串，通过比对来确定合法访问           |

**传参示例：**

```
code: 1L9KvvN21ovzYuGIhA1UXwpkQeGZHrRMur89iz3f414
state: state
```

## 修改管理员密码

**接口描述：**

- 修改管理员密码（修改后需重新登录）

**请求URL：**

- ` /admin/password`

**请求方式：**

- POST

**参数：**

| 参数名   | 必选 | 类型   | 说明   |
| :------- | :--- | :----- | ------ |
| password | 是   | String | 新密码 |

**传参示例：**

```
password : 123456
```

 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "修改密码成功"
}
```

 **返回示例2:**

```
 {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 退出登录

**接口描述：**

- 退出（注销）登录，返回登录页面

**请求URL：**

- ` /logout`

**请求方式：**

- GET

**参数：**

- 无

## 返回用户信息列表

**接口描述：**

- 返回指定页号和页码的用户信息列表

**请求URL：**

- ` /profile/all`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明         |
| :----- | :--- | :--- | ------------ |
| page   | 是   | int  | 返回数据页号 |
| size   | 是   | int  | 返回数据页码 |

**传参示例：**

```
page: 1
size: 15
```

 **返回示例:**

```
 {
  "code": 0,
  "msg": "",
  "count": 1,
  "data": [
    {
      "errcode": 0,
      "errmsg": "ok",
      "id": 1,
      "role": 1,
      "userid": "1705050205",
      "avatar": "http://xxx/xxx.png",
      "name": "张三",
      "age": 0,
      "gender": 1,
      "phone": "123456789",
      "email": "",
      "createTime": "2020-05-15 22:54"
    }
  ]
}
```

 **返回参数说明:**

| 参数       | 类型   | 描述                                  |
| :--------- | :----- | :------------------------------------ |
| code       | int    | layui错误码                           |
| msg        | String | layui错误信息                         |
| count      | int    | 记录条数                              |
| errcode    | int    | 错误码                                |
| errmsg     | String | 错误信息                              |
| id         | String | 用户信息记录id                        |
| role       | int    | 身份（1代表学生，2代表老师）          |
| userid     | String | 学号或职工号                          |
| name       | int    | 姓名                                  |
| age        | String | 年龄                                  |
| gender     | int    | 性别（0代表未设置，1代表男，2代表女） |
| phone      | String | 电话                                  |
| email      | String | 邮箱                                  |
| createTime | int    | 账号创建时间                          |

## 返回管理员列表

**接口描述：**

- 返回管理员列表

**请求URL：**

- ` /admin/all`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明         |
| :----- | :--- | :--- | ------------ |
| page   | 是   | int  | 返回数据页号 |
| size   | 是   | int  | 返回数据页码 |

**传参示例：**

```
page: 1
size: 15
```

 **返回示例1:**

```
  {
  "code": 0,
  "msg": "",
  "count": 2,
  "data": [
    {
      "id": 1,
      "username": "admin",
      "password": "admin",
      "privileged": 1,
      "createTime": "2020-05-15 21:46"
    }
  ]
}
```

 **返回参数说明:**

| 参数       | 类型   | 描述                                   |
| :--------- | :----- | :------------------------------------- |
| code       | int    | 错误码                                 |
| msg        | String | 错误信息                               |
| count      | int    | 记录条数                               |
| id         | int    | 管理员id                               |
| username   | String | 管理员账号                             |
| password   | String | 管理员密码                             |
| privileged | int    | 是否为超级管理员（1代表是，0代表不是） |
| createTime | String | 管理员账号创建时间                     |

 **返回示例2:**

```
 {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 管理员信息编辑页面

**接口描述：**

- 跳转至管理员信息编辑页面

**请求URL：**

- ` /admin/edit/{id}`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明       |
| :----- | :--- | :--- | ---------- |
| id     | 是   | int  | 管理员账户 |

## 修改管理员信息

**接口描述：**

- 修改管理员信息

**请求URL：**

- ` /admin/edit`

**请求方式：**

- POST

**参数：**

| 参数名     | 必选 | 类型   | 说明                 |
| :--------- | :--- | :----- | -------------------- |
| id         | 是   | int    | 管理员id             |
| username   | 是   | String | 管理员用户名         |
| password   | 是   | String | 管理员密码           |
| privileged | 是   | int    | 是否修改为超级管理员 |

**传参示例：**

```
id : 2
username : test
password : test
privileged : 1
```

 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "修改管理员成功"
}
```

 **返回示例2:**

```
 {
  "errcode": 1006,
  "errmsg": "管理员权限不足"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 添加管理员

**接口描述：**

- 添加管理员（超级管理员才有权限调用）

**请求URL：**

- ` /admin/add`

**请求方式：**

- POST

**参数：**

| 参数名     | 必选 | 类型   | 说明                 |
| :--------- | :--- | :----- | -------------------- |
| username   | 是   | String | 新增管理员用户名     |
| password   | 是   | String | 新增管理员密码       |
| privileged | 是   | int    | 是否新增为超级管理员 |

**传参示例：**

```
username : test
password : test
privileged : 1
```

 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "添加管理员成功"
}
```

 **返回示例2:**

```
 {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 批量添加管理员

**接口描述：**

- 批量添加管理员（超级管理员才有权限调用,添加的管理员用户名和密码一致）

**请求URL：**

- ` /admin/batch/add`

**请求方式：**

- POST

**参数：**

| 参数名     | 必选 | 类型     | 说明                       |
| :--------- | :--- | :------- | -------------------------- |
| userids    | 是   | String[] | 新增管理员用户名数组       |
| privileged | 是   | int      | 是否新增管理员为超级管理员 |

**传参示例：**

```
userids : test1
userids : test2
privileged : 0
```

 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "添加管理员成功"
}
```

 **返回示例2:**

```
 {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 批量删除管理员

**接口描述：**

- 批量删除管理员（超级管理员才有权限调用）

**请求URL：**

- ` /admin/delete`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型  | 说明         |
| :----- | :--- | :---- | ------------ |
| ids    | 是   | int[] | 管理员id数组 |

**传参示例：**

```
ids : 3
ids : 5
```

 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "删除管理员成功"
}
```

 **返回示例2:**

```
 {
  "errcode": 1006,
  "errmsg": "管理员权限不足"
}
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 返回待审核预约记录

**接口描述：**

- 返回待审核的预约记录

**请求URL：**

- ` /check/all`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明         |
| :----- | :--- | :--- | ------------ |
| page   | 是   | int  | 返回数据页号 |
| size   | 是   | int  | 返回数据页码 |

**传参示例：**

```
page: 1
size: 15
```

 **返回示例:**

```
  {
  "code": 0,
  "msg": "",
  "count": 1,
  "data": [
    {
      "appointId": 2,
      "userid": "1705050205",
      "name": "张三",
      "roomId": 2,
      "place": "逸夫楼201",
      "size": 40,
      "purpose": "开会",
      "participants": 30,
      "phone": "123456789",
      "startTime": "2020-05-20 10:00",
      "duration": 60,
      "note": "",
      "handTime": "2020-05-15 23:11"
    }
  ]
}
```

 **返回参数说明:**

| 参数         | 类型   | 描述                  |
| :----------- | :----- | :-------------------- |
| code         | int    | 错误码                |
| msg          | String | 错误信息              |
| count        | int    | 记录条数              |
| appointId    | int    | 预约记录id            |
| userid       | String | 学号或职工号          |
| name         | String | 姓名                  |
| roomId       | int    | 会议室id              |
| place        | String | 会议室地点            |
| size         | int    | 会议室可容纳人数      |
| purpose      | String | 会议室用途            |
| participants | int    | 参与人数              |
| phone        | String | 联系电话              |
| startTime    | String | 占用开始时间          |
| duration     | int    | 占用时长（单位:分钟） |
| note         | String | 备注信息              |
| handTime     | String | 预约提交时间          |

## 通过预约请求

**接口描述：**

- 退回（拒绝）预约请求

**请求URL：**

- ` check/approve`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型  | 说明           |
| :----- | :--- | :---- | -------------- |
| ais    | 是   | int[] | 退回预约号数组 |

**传参示例：**

```
ais: 1
ais: 2
```

 **返回示例1:**

```
  {
  "errcode": 2007,
  "errmsg": "预约号参数为空或不合法"
}
```

 **返回示例2:**

```
  {
  "errcode": 0,
  "errmsg": "通过预约成功"
}
```

 **返回参数说明:**

| 参数 | 类型   | 描述     |
| :--- | :----- | :------- |
| code | int    | 错误码   |
| msg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 退回预约请求

**接口描述：**

- 退回（拒绝）预约请求

**请求URL：**

- ` check/reject`

**请求方式：**

- POST

**参数：**

| 参数名    | 必选 | 类型   | 说明           |
| :-------- | :--- | :----- | -------------- |
| ais       | 是   | int[]  | 退回预约号数组 |
| checkInfo | 是   | String | 退回原因       |

**传参示例：**

```
ais: 1
ais: 2
checkInfo : "会议室暂时管制"
```

 **返回示例1:**

```
  {
  "errcode": 2007,
  "errmsg": "预约号参数为空或不合法"
}
```

 **返回示例2:**

```
  {
  "errcode": 0,
  "errmsg": "退回成功"
}
```

 **返回参数说明:**

| 参数 | 类型   | 描述     |
| :--- | :----- | :------- |
| code | int    | 错误码   |
| msg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 获取服务器运行状态信息

**接口描述：**

- 获取服务器运行状态信息

**请求URL：**

- ` /server`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例1:**

```
 {
  "errcode": 0,
  "totalUser": 1,
  "errmsg": "ok",
  "totalAppointment": 2,
  "totalToday": 0,
  "autoCheck": true,
  "autoClean": true,
  "username": "admin"
}
```

 **返回参数说明:**

| 参数             | 类型    | 描述                     |
| :--------------- | :------ | :----------------------- |
| errcode          | int     | 错误码                   |
| totalUser        | int     | 总用户数                 |
| errmsg           | String  | 错误信息                 |
| totalAppointment | int     | 总预约记录数             |
| totalToday       | String  | 今日预约数               |
| autoCheck        | boolean | 自动审核运行状态         |
| autoClean        | boolean | 自动清理过期记录运行状态 |
| username         | String  | 当前管理员用户名         |

 **返回示例2:**

```
  {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数 | 类型   | 描述     |
| :--- | :----- | :------- |
| code | int    | 错误码   |
| msg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 获取服务器参数

**接口描述：**

- 获取服务器参数信息

**请求URL：**

- ` /server/properties`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例1:**

```
 {
  "errcode": 0,
  "checkInterval": 2,
  "cleanInterval": 7,
  "sh": 8,
  "ch": 22,
  "errmsg": "ok",
  "sm": 0,
  "cm": 0,
  "check": true,
  "clean": true
}
```

 **返回参数说明:**

| 参数          | 类型    | 描述                             |
| :------------ | :------ | :------------------------------- |
| errcode       | int     | 错误码                           |
| errmsg        | String  | 错误信息                         |
| checkInterval | int     | 自动审核间隔（单位：分钟）       |
| cleanInterval | int     | 自动清理过期记录间隔（单位：天） |
| sh            | int     | 会议室开启小时                   |
| ch            | int     | 会议室关闭小时                   |
| sm            | int     | 会议室开启分钟                   |
| cm            | int     | 会议室关闭分钟                   |
| check         | boolean | 自动审核运行状态                 |
| clean         | boolean | 自动清理过期记录运行状态         |

 **返回示例2:**

```
  {
  "errcode": 1005,
  "errmsg": "管理员身份过期，请重新登录"
}
```

 **返回参数说明:**

| 参数 | 类型   | 描述     |
| :--- | :----- | :------- |
| code | int    | 错误码   |
| msg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 配置服务器参数

**接口描述：**

- 配置服务器参数

**请求URL：**

- ` /server/properties`

**请求方式：**

- POST

**参数：**

| 参数名        | 必选 | 类型    | 说明                                 |
| :------------ | :--- | :------ | ------------------------------------ |
| sh            | 是   | int     | 会议室开放小时                       |
| sm            | 是   | int     | 会议室开放分钟                       |
| ch            | 是   | int     | 会议室关闭小时                       |
| cm            | 是   | int     | 会议室关闭分钟                       |
| check         | 是   | boolean | 自动审核运行状态                     |
| checkInterval | 是   | int     | 自动审核间隔（单位：分钟）           |
| clean         | 是   | boolean | 自动清理过期预约记录运行状态         |
| cleanInterval | 是   | int     | 自动清理过期预约记录间隔（单位：天） |

**传参示例：**

```
sh : 1
sm : 1
ch : 1
cm : 1
check : true
checkInterval : 1
clean : true
cleanInterval : 1
```

 **返回示例1:**

```
  {
  "errcode": 0,
  "errmsg": "修改成功"
}
```

 **返回示例2:**

```
  {
  "errcode": 1004,
  "errmsg": "部分服务器属性修改失败，请检查数据格式是否规范"
}
```

 **返回参数说明:**

| 参数 | 类型   | 描述     |
| :--- | :----- | :------- |
| code | int    | 错误码   |
| msg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

## 上传会议室表格

**接口描述：**

- 上传会议室表格

**请求URL：**

- ` /rooms/upload`

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型                | 说明      |
| :----- | :--- | :------------------ | --------- |
| rooms  | 是   | multipart/form-data | execl文件 |


 **返回示例1:**

```
 {
  "code": 0,
  "msg": "表格文件上传成功",
  "data": {
    "filename": "rooms.xlsx"
  }
```

 **返回示例2:**

```
  {
  "code": 4004,
  "msg": "表格文件上传失败"
```

 **返回参数说明:**

| 参数     | 类型   | 描述                 |
| :------- | :----- | :------------------- |
| code     | int    | 错误码               |
| msg      | String | 错误信息             |
| filename | String | 用户上传的表格文件名 |

 **备注:**

 - 错误码详情请参照全局错误码

## 下载会议室表格

**接口描述：**

- 下载会议室表格

**请求URL：**

- ` /rooms/download`

**请求方式：**

- GET

**参数：**

- 无

## 配置会议室

**接口描述：**

- 按上传的会议室表格配置会议室

**请求URL：**

- ` /rooms/set`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例1:**

```
 {
  "errcode": 0,
  "errmsg": "配置会议室成功"
```

 **返回示例2:**

```
  {
  "errcode": 1012,
  "errmsg": "配置会议室数据失败，请检查上传的表格数据书否规范"
```

 **返回参数说明:**

| 参数    | 类型   | 描述     |
| :------ | :----- | :------- |
| errcode | int    | 错误码   |
| errmsg  | String | 错误信息 |

 **备注:**

 - 错误码详情请参照全局错误码

# 微信相关

## 企业微信重定向页面

**接口描述：**

- 企业微信重定向页面，通过传来的code，获取用户信息并放入session中（用户不存在便创建新用户），并返回到应用首页，仅供企业微信重定向调用

**请求URL：**

- ` /auth`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明                             |
| :----- | :--- | :--- | -------------------------------- |
| code   | 是   | int  | 企业微信重定向code               |
| state  | 是   | int  | 重定向字符串，用于判断同一请求源 |

**传参示例：**

```
code : cnoOtjEnjRXTu9Q-LlU95ebU170vl6iPidH7GPD_1Qc
state : ""
```

## 获取JS-SDK的ticket

**接口描述：**

- 获取JS-SDK的ticket

**请求URL：**

- ` /ticket`

**请求方式：**

- GET

**参数：**

- 无


 **返回示例:**

``` 
bxLdikRXVbTPdHSM05e5u04OtoSiH2VMljJGqQv3ZZaAOmvtcQuRMN_1AAMvaj5igd0-BNYQbZaljsGOWUQK0Q
```

## 获取JS-SDK权限签名

**接口描述：**

- 传入需要使用JS_SDK的页面url，后台运行算法，返回调用JS-SDK所需要的签名

**请求URL：**

- ` /jssdk`

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明               |
| :----- | :--- | :--- | ------------------ |
| url    | 是   | int  | 企业微信重定向code |

**传参示例：**

```
url : http://a/b/c
```

 **返回示例:**

```
{
  "appId": "wwe0622ecf5415f2ef",
  "timestamp": 1589619150,
  "nonceStr": "lepzmpurcd",
  "signature": "0a539568aa749fb00426201b7e33190570b2f20e"
}
```

 **返回参数说明:**

| 参数      | 类型   | 描述       |
| :-------- | :----- | :--------- |
| appId     | String | 应用appid  |
| timestamp | long   | 时间戳     |
| nonceStr  | String | 随机字符串 |
| signature | String | 权限签名   |

# 全局错误码

错误码100x、200x、300x、400x，严重程度依次递减

| 错误码 |                        描述                        |
| :----: | :------------------------------------------------: |
|  1001  |             请在企业微信客户端打开链接             |
|  1002  |               管理员用户名或密码错误               |
|  1003  |                 服务器属性修改失败                 |
|  1004  |               部分服务器属性修改失败               |
|  1005  |             管理员身份过期，请重新登录             |
|  1006  |                   管理员权限不足                   |
|  1007  |                 管理员用户名已存在                 |
|  1008  |               管理员用户名为系统保留               |
|  1009  |            自动审核运行中，人工审核停用            |
|  1010  | 未找到企业用户名和管理员名相同的匹配项（非管理员） |
|  1011  |                 部分管理员添加失败                 |
|  1012  |  配置会议室数据失败，请检查上传的表格数据是否规范  |

| 错误码 |          描述          |
| :----: | :--------------------: |
|  2001  |    获取用户信息失败    |
|  2002  |    修改用户信息失败    |
|  2003  |      提交预约失败      |
|  2004  |      退回预约失败      |
|  2005  |      通过预约失败      |
|  2006  |      取消预约失败      |
|  2007  | 预约号参数为空或不合法 |

| 错误码 |               描述               |
| :----: | :------------------------------: |
|  3001  |    请在企业微信客户端打开链接    |
|  3002  |            非企业成员            |
|  3003  | 预约的时间段为会议室非开放时间段 |
|  3004  |           身份信息过期           |

| 错误码 |           描述           |
| :----: | :----------------------: |
|  4001  | 您上传头像的不是图片类型 |
|  4002  |       数据格式有误       |
|  4003  |         操作频繁         |
|  4004  |     上传表格文件失败     |